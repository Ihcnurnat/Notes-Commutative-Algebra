%\section{Chapter 5}

\section{Proposition 5.1}

For iii) $\Rightarrow$ iv), notice that $C$ is a subring and $1\in C$ in particular, which helped us to prove the faithful property.

For iv) $\Rightarrow$ i), see Gong Ting's notes \href{https://drive.google.com/file/d/12aM32lvgwaq9DI_ydv93aIty7Q1MhRmw/view}{HERE} on Page 30, in which the last part used "determinant trick".

\section{Corollary 5.4.}\label{Atiyah Corollary 5.4.}

For partial converse: If we know $A\subset C$ is finite type. Then $B\subset C$ is finite type. This is just considering coefficients in $A$ as $B$. More precisely, we can prove this by applying right exact functor $\otimes_{A}B$ to the surjective map $A[...]\to C$ to get $B[...]\to C$. 

For a more concrete description: If we know ring extensions $A\subset B\subset C$. Assume $A\subset C$ is integral then $A\subset B$ is integral for $b\in B\subset C$; and $B\subset C$ is integral for $c\in C$ we could use exactly the same monic polynomial. 

However, under the same condition, $A\subset B$ might not be finite type. For example, as in \href{https://math.stackexchange.com/questions/43353/transitivity-of-finitely-generated-condition}{POST}, we have 
\[k\subset k[x_1x_2, x_1x_2^2, x_1x_2^3,...\subset k[x_1,x_2].\]

For a more complete description, see Gathmann's Notes Lemma 9.6. on Page 81. For the converse direction of the statement, namely if we know $A\subset C$ then ... It's very important $A, B$ are both rings. See Stacks Project: finite ring map! \todo{Checked!}

\subsection{Further Discussion}

We'll consider the condition of "finitely generated module". Assume $A\subset B\subset C$ as module. We can build the tower of $A\subset C$ from small blocks. For the other direction we know this fantastic discussion: \href{https://math.stackexchange.com/questions/126946/a-subseteq-b-subseteq-c-ring-extensions-a-subseteq-c-finite-finitely-genera?rq=1}{POST}.
\[A:=k[X_1,...]\subset B:= A[\{X_iY\}_{i\in\mathbb Z}]\subset C:= A[Y]/(Y^2).\]
Basically, we need a non-Noetherian base ring. And over that we can always form a polynomial ring while quotient out $Y^2$ such that it's a f.g. module and f.g. algebra.

\section{Proposition 5.6.}

\subsection{(i)}
Here I present a re-write of the proof. 

% https://q.uiver.app/#q=WzAsMyxbMCwwLCJBIl0sWzEsMCwiQiJdLFsyLDAsIkIvXFxtYXRoZnJhayBiIl0sWzEsMiwiXFxwaV8yIl0sWzAsMSwiXFxpb3RhIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XV0=
\[\begin{tikzcd}
	A & B & {B/\mathfrak b}
	\arrow["{\pi_2}", from=1-2, to=1-3]
	\arrow["\iota", hook, from=1-1, to=1-2]
\end{tikzcd}\]

Composition of the map has kernel $\operatorname{Ker}(\pi_2\circ\iota)= \mathfrak b^c$, which induces an injective (well-defined) map $f:A/\mathfrak a\to B/\mathfrak b$ so that the following diagram commute

% https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzEsMCwiQiJdLFsxLDEsIkIvXFxtYXRoZnJhayBiIl0sWzAsMSwiQS9cXG1hdGhmcmFrIGEiXSxbMCwzLCJcXHBpXzEiLDJdLFsxLDIsIlxccGlfMiIsMl0sWzAsMSwiXFxpb3RhIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbMywyLCJmIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
\[\begin{tikzcd}
	A & B \\
	{A/\mathfrak a} & {B/\mathfrak b}
	\arrow["{\pi_1}"', from=1-1, to=2-1]
	\arrow["{\pi_2}"', from=1-2, to=2-2]
	\arrow["\iota", hook, from=1-1, to=1-2]
	\arrow["f"', dashed, from=2-1, to=2-2]
\end{tikzcd}\]

Suppose we have a monic polynomial such that for $x\in B$,
\[x^n+\iota(a_1)x^{n-1}+\cdots+\iota(a_n)=0\in B\] for $a_i\in A$ where integer $1\leq i\leq n$. By the commutativity of the diagram we have 
\begin{align*}
    \pi_2(0_A)=0=&\pi_2(x)^n+\pi_2\circ\iota(a_1)\pi_2(x)^{n-1}+\cdots+\pi_2\circ\iota(a_n)\\
    =&\pi_2(x)^n+f\circ\pi_1(a_1)\pi_2(x)^{n-1}+\cdots+f\circ\pi_1(a_n)
\end{align*}with all coefficients in $f(A/\mathfrak a)\subset B$. Notice that $\pi_2$ is surjective, this means for any element of $B/\mathfrak b$ we can find a monic polynomial in $f(A/\mathfrak a)[X]$ admits it as a solution. Therefore we know $B/\mathfrak b$ is integral over $A/\mathfrak a$.

Also see Gathmann's Notes Lemma 9.7. for extra information regarding inheritance of integral.

\subsection{Pathological}

Question: If we know integral extension of quotient rings $A/\mathfrak a\subset B/\mathfrak b$, do we know $A\subset B$ is integral? No. Consider a non-integral extension $R\subset R[x]$. Ideal $\langle x\rangle$ contract as $\langle x\rangle^c=0$, so 
\[R=R/(I\cap R)\subset R[x]/\langle x\rangle=R\] gives us an integral extension.

See my remarks on Gathmann's Notes Lemma 9.7.

\subsection{(ii)}

Here it's important that $S$ is un-changed! See an example where the implication will fail if localising with respect to different multiplicatively closed subset: Gathmann Commutative Algebra Exercise 9.8. (b) on Page 82.

Question: does there exist $S^{-1}B$ integral over $S^{-1}A$, but $B$ not integral over $A$?

\subsection{Comments}

See \href{https://math.stackexchange.com/questions/3458848/localization-of-integral-ring-extension-is-not-integral-in-general}{\enquote{Localization of integral ring extension is not integral, in general}}.

\section{Lemma 5.14.}

Here $M=A[x_1,...,x_n]$ admits a ring structure. Therefore for a polynomial with coefficients in $\mathfrak a$, we have 
\[\phi^n+a_i\phi^{n-1}+\cdots+a_n=0\in\operatorname{End}M.\]Apply this endormorphism to $1\in M=A[...]$, we have 
\begin{align*}
	x^?+a_i x^?+a_n=0\in M, \in C.
\end{align*}

\section{Proposition 5.18.}

(i). According to (1.6) \cite{atiyah1994introduction}, we need to prove the \textbf{set} of non-units $\mathfrak m$  is an ideal. Another elegant proof is given by Chap 4 Section 10 on Page 71 of \cite{matsumura1989commutative}, which relies on a lemma: 

\textit{\textbf{LEMMA}: If $R$ (integral domain with fraction field $K$) is a valuation ring then for any two ideals $I,J\triangleleft R$ either $I\subset J$ or $J\subset I$ must hold.}
\begin{proof}
	The case when either of $I,J=0$ is trivial. We may assume $I\neq 0$ and $J\neq 0$. Pick $x\in I$ and $x\notin J$ with $0\neq y\in J$. 

	Consider $x/y\in \Frac R=K$, if $x/y\in R$ then $y\cdot x/y=x\in J$ contradiction. Then $x/y\notin R$. Hence $y/x\in R$, we have $y=x(y/x)\in I$ and $J\subset I$.
\end{proof}

Hence being a valuation ring forces the set of ideals become a \textit{totally ordered set}. Hence it's a local ring.

\section{Corollary 5.22.}

The existence of $B$ is given by Theorem 5.21. and extend by (ii) of Proposition 5.18.